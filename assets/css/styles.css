/* ===== أساسيات ===== */
*{ box-sizing:border-box }
:root{
  --ink:#0f172a; --ink-2:#334155;
  --bg:#f7fafc; --panel:#ffffff;
  --glass:255 255 255/.68; --glass-b:255 255 255/.32;
  --radius:16px;
  --mint:#a7f3d0; --teal:#34d399; --green:#10b981; --red:#ef4444; --cyan:#06b6d4;
  --border:1px solid color-mix(in oklab, #000, #fff 85%);
  --shadow:0 10px 24px #00000014;
}
[data-theme="red"]{  --mint:#fecaca; --teal:#fca5a5; --green:#ef4444; }
[data-theme="green"]{--mint:#bbf7d0; --teal:#86efac; --green:#22c55e; }
html,body{ margin:0; padding:0; color:var(--ink); background:linear-gradient(180deg,#f5fffb,#f6fbff); font-family:system-ui, -apple-system, Segoe UI, Roboto, "Noto Kufi Arabic", sans-serif; }
.container{ width:min(1100px, 92%); margin-inline:auto; }

/* ===== Header ===== */
.header{ position:sticky; top:0; z-index:50; backdrop-filter:blur(18px) saturate(120%); background:color-mix(in oklab, var(--glass) 92%, transparent); border-bottom:var(--border); box-shadow:var(--shadow) }
.header.scrolled{ box-shadow:0 12px 24px #00000012 }
.nav{ display:grid; grid-template-columns:auto 1fr auto; align-items:center; gap:16px; padding:10px 0 }
.brand{ display:flex; align-items:center; gap:10px; font-weight:900; letter-spacing:.3px; text-decoration:none; color:inherit }
.dot{ inline-size:28px; block-size:28px; border-radius:8px; background:linear-gradient(135deg, var(--mint), var(--teal)) }
.label{ font-size:18px }
.search{ display:flex; align-items:center; gap:8px; padding:8px 12px; border-radius:999px; background:rgba(var(--glass)); border:var(--border); backdrop-filter:blur(12px) }
.search input{ all:unset; direction:rtl; inline-size:240px; max-width:60vw }
.actions{ display:flex; align-items:center; gap:8px }
.badge{ background:#111; color:#fff; padding:0 8px; border-radius:999px; font-size:12px; margin-inline-start:6px }

/* ===== Buttons/Chips ===== */
.btn, .btn-ghost, .chip{ appearance:none; border:0; border-radius:999px; padding:10px 14px; cursor:pointer; font-weight:700; transition:transform .06s ease, opacity .2s }
.btn{ background:linear-gradient(135deg, var(--mint), var(--teal)); color:#0b0b0b; box-shadow:var(--shadow) }
.btn:hover{ transform:translateY(-1px) }
.btn-ghost{ background:rgba(var(--glass)); border:var(--border) }
.chip{ background:rgba(var(--glass)); border:var(--border) }
.icon{ display:inline-block }

/* ===== Swatches ===== */
.swatches{ display:flex; gap:8px; padding:8px 0 12px }
.swatch{ width:22px; height:22px; border-radius:50%; border:var(--border); background:#fff; box-shadow:var(--shadow); cursor:pointer }
.swatch[data-t="cyan"]{ background:conic-gradient(#06b6d4, #67e8f9, #cffafe) }
.swatch[data-t="red"] { background:conic-gradient(#ef4444, #fecaca, #fee2e2) }
.swatch[data-t="green"]{ background:conic-gradient(#22c55e, #86efac, #dcfce7) }

/* ===== Filters ===== */
.filters{ display:grid; grid-template-columns:repeat(6, minmax(0,1fr)); gap:10px; align-items:center }
.filters input, .filters select{ padding:10px 12px; border-radius:10px; border:var(--border); background:#fff }
.filters .chip{ justify-self:start }

/* ===== Stories/Mood ===== */
.stories{ display:flex; gap:10px; overflow:auto; padding:6px 0 2px }
.story{ padding:10px 14px; border-radius:12px; background:rgba(var(--glass)); border:var(--border) }
.mood{ display:flex; gap:8px; flex-wrap:wrap; margin-top:8px }
.chips, .vstack .chips{ display:flex; flex-wrap:wrap; gap:8px }

/* ===== Capsules ===== */
.capsules{ display:grid; grid-template-columns:repeat(auto-fit, minmax(240px, 1fr)); gap:12px }
.capsule{ display:grid; grid-template-columns:auto 1fr auto; align-items:center; gap:10px; padding:12px; border-radius:16px; }
.capsule .ico{ width:46px; height:46px; display:grid; place-items:center; border-radius:12px; background:linear-gradient(135deg, var(--mint), var(--teal)) }

/* ===== Grid ===== */
.grid{ display:grid; grid-template-columns:repeat(auto-fit, minmax(210px,1fr)); gap:14px }
.card{ padding:12px; border-radius:14px; background:rgba(var(--glass)); border:var(--border) }
.badge-corner{ position:absolute; inset-inline-start:10px; inset-block-start:10px; background:#111; color:#fff; font-size:12px; padding:4px 8px; border-radius:999px }
.skeleton{ background:linear-gradient(90deg,#eee,#f7f7f7,#eee); animation:sk 1.2s infinite; }
@keyframes sk{ 0%{background-position:-200px 0} 100%{background-position:200px 0} }

/* ===== Dialog / Overlays ===== */
.overlay{ position:fixed; inset:0; display:grid; place-items:center; background:color-mix(in oklab, #000, transparent 72%); opacity:0; visibility:hidden; transition:.18s; z-index:60 }
.overlay.show{ opacity:1; visibility:visible }
.sheet{ width:min(920px, 92%); max-height:88vh; overflow:auto; border-radius:18px; padding:12px; }
.dlg-body{ display:grid; grid-template-columns:320px 1fr; gap:16px }
.dlg-img{ width:100%; aspect-ratio:1/1; object-fit:cover; border-radius:12px; background:color-mix(in oklab, var(--green), white 92%) }
.dlg-actions{ display:flex; gap:8px; margin-top:8px }
.price-lg{ display:flex; align-items:center; gap:10px; font-size:22px }
.muted{ color:var(--ink-2) }

/* ===== Cart / Account ===== */
.vstack{ display:grid; gap:10px }
.hstack{ display:flex; gap:8px; align-items:center }
.cart-sum{ display:flex; justify-content:space-between; margin:10px 0; padding:10px; border-radius:12px; background:rgba(var(--glass)); border:var(--border) }

/* ===== Tabs ===== */
.tabs{ position:relative; display:flex; gap:8px; border-bottom:var(--border); padding-bottom:6px }
.tab{ background:transparent; border:0; padding:8px 10px; cursor:pointer; font-weight:700 }
.tab[aria-selected="true"]{ color:var(--green) }
.tabs .indicator{ position:absolute; bottom:-1px; height:3px; width:60px; border-radius:6px; background:linear-gradient(90deg, var(--mint), var(--teal)); transform:translateX(0); transition:.15s }

/* ===== Toast ===== */
.toast{ position:fixed; inset-inline-start:50%; transform:translateX(-50%); bottom:18px; background:#111; color:#fff; padding:10px 14px; border-radius:999px; opacity:0; visibility:hidden; transition:.18s; z-index:70 }
.toast.show{ opacity:1; visibility:visible }

/* ===== Ripple + micro animations ===== */
.ripple{ position:absolute; border-radius:50%; transform:scale(0); animation:rip .5s linear; background:color-mix(in oklab, #fff, #000 12%); pointer-events:none; opacity:.35 }
@keyframes rip{ to{ transform:scale(1); opacity:0 } }
.fav.bounce{ animation:b .22s ease }
@keyframes b{ 50%{ transform:scale(1.1) } }

/* ===== Utilities ===== */
.empty{ text-align:center; padding:20px; border-radius:14px }
.reveal{ opacity:0; transform:translateY(12px); transition:.35s }
.reveal.in{ opacity:1; transform:none }

/* ===== Responsive ===== */
@media (max-width:780px){
  .dlg-body{ grid-template-columns:1fr }
  .filters{ grid-template-columns:1fr 1fr 1fr 1fr 1fr auto }
  .search input{ inline-size:46vw }
}
